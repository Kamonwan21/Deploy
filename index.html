<!DOCTYPE html>
<html>
<head>
    <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
    -->
    <base href="./">

    <meta charset="UTF-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="description" content="A new Flutter project.">

    <!-- iOS meta tags & icons -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="fluttertest">
    <link rel="apple-touch-icon" href="./icons/Icon-192.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png"/>

    <title>fluttertest</title>
    <link rel="manifest" href="manifest.json">

    <style>
        .error-popup {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            z-index: 1000;
            display: none; /* ซ่อนในตอนเริ่มต้น */
        }
    </style>
</head>
<body>
    <h1>ลองทำให้เกิด Error!</h1>
    <button onclick="triggerError()">Click me to trigger an error</button>

    <div id="errorPopup" class="error-popup"></div>

    <script>
        // ฟังก์ชันดักจับ Error ทั่วไป
        window.onerror = function(message, source, lineno, colno, error) {
            var errorMessage = "Error: " + message + "\n" +
                               "Source: " + source + "\n" +
                               "Line: " + lineno + "\n" +
                               "Column: " + colno + "\n" +
                               "Stack Trace: " + (error && error.stack ? error.stack : 'N/A');
            showErrorPopup(errorMessage);
            return true; // ป้องกันไม่ให้ Error ไปแสดงใน Console
        };

        // ฟังก์ชันสำหรับสร้าง Popup และแสดง Error
        function showErrorPopup(errorMessage) {
            var popup = document.getElementById('errorPopup');
            popup.textContent = errorMessage;
            popup.style.display = 'block';
            // ซ่อน Popup หลังจาก 5 วินาที
            setTimeout(function() {
                popup.style.display = 'none';
            }, 5000);
        }

        // ฟังก์ชันจำลองการเกิด Error
        function triggerError() {
            // นี่จะทำให้เกิด ReferenceError
            nonExistentFunction();
        }
    </script>

    <script src="flutter_bootstrap.js" async></script>
</body>
</html>
